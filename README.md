# Система управления банковскими картами

## Описание
Система управления банковскими картами предназначена для безопасного и эффективного управления банковскими картами. Поддерживает создание, просмотр, переводы и комплексное управление пользователями.

## Используемые технологии
- Java 17+
- Spring Boot
- Spring Security
- Spring Data JPA
- PostgreSQL
- Liquibase
- Docker
- JWT
- Swagger (OpenAPI)

## Структура проекта
- `src/main/java`: Исходный код (сущности, репозитории, сервисы, контроллеры, безопасность, утилиты).
- `src/main/resources`: Конфигурационные файлы и миграции базы данных.
- `src/test/java`: Юнит-тесты.
- `docker-compose.yml`: Конфигурация Docker Compose для приложения и базы данных.
- `docs/openapi.yaml`: OpenAPI-спецификация.

## Как запустить проект

1. **Склонируйте репозиторий и перейдите в папку проекта:**
   ```bash
   git clone <ваш-репозиторий>
   cd <ваш-репозиторий>
   ```

2. **Соберите проект:**
   ```bash
   ./mvnw clean package
   ```
   или (для Windows):
   ```bash
   mvnw.cmd clean package
   ```

3. **Запустите через Docker Compose:**
   ```bash
   docker-compose up --build
   ```
   Это запустит приложение и базу данных PostgreSQL. Миграции Liquibase применятся автоматически.

4. **Проверьте доступность приложения:**
   - API: [http://localhost:8080](http://localhost:8080)
   - Swagger UI: [http://localhost:8080/swagger-ui](http://localhost:8080/swagger-ui)

   Swagger UI должен быть доступен без авторизации.

## Возможности API
- **Аутентификация и авторизация:** JWT, роли: ADMIN и USER.
- **Управление картами:** Создание, просмотр, блокировка, активация, удаление карт. Маскированные номера карт.
- **Управление пользователями:** Администратор может управлять пользователями.
- **Переводы:** Пользователь может переводить средства между своими картами.
- **Фильтрация и пагинация:** Для списков карт и пользователей.
- **Валидация и обработка ошибок:** Проверка входных данных, информативные сообщения об ошибках.
- **Безопасность:** Шифрование номеров карт, ролевой доступ.

## Миграции базы данных
- Управляются через Liquibase (`src/main/resources/db/migration/db.changelog-1.0.xml`).
- Применяются автоматически при запуске через Docker Compose.

## Тестирование
- Юнит-тесты бизнес-логики находятся в `src/test/java`.
- Для запуска тестов используйте:
  ```bash
  ./mvnw test
  ```
  или (для Windows):
  ```bash
  mvnw.cmd test
  ```

## Документация
- Документация API доступна через Swagger UI.
- OpenAPI YAML-спецификация: `docs/openapi.yaml`.
